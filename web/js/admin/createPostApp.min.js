$(function(){function a(a){var b="<div class='form-row' id='post_form_tags_"+a+"_name_parent'><div class='form-field'><div class='row'><div class='column-10'><input type='text' id='post_form_tags_"+a+"_name' name='post_form[tags]["+a+"][name]'/></div><div class='column-2'><button class='removeTagBtn btn btn-primary' data-target='post_form_tags_"+a+"_name_parent'><i class='fa fa-minus'></i></button></div></div></div></div>";return $(b)}function b(a){n.find(".dropzone-message").text(a)}function c(a){$("#post_form_bandeau").val(a.pdfId),n.find(".dropzone-message").text(a.msg)}function d(a){n.find(".dropzone-message").text(a.msg)}function e(a){o.find(".dropzone-message").text(a)}function f(a){$("#post_form_squarreThumb").val(a.pdfId),o.find(".dropzone-message").text(a.msg)}function g(a){o.find(".dropzone-message").text(a.msg)}function h(a){u.find(".dropzone-message").text(a)}function i(a){$("#post_form_fbThumb").val(a.pdfId),u.find(".dropzone-message").text(a.msg)}function j(a){u.find(".dropzone-message").text(a.msg)}function k(){p.hasTitle===!0&&"disabled"==l.attr("disabled")&&l.attr("disabled",!1),p.hasTitle===!0&&p.hasBody===!0&&p.hasTarget===!0&&p.hasCategory===!0&&p.hasExcerpt===!0&&"disabled"==m.attr("disabled")&&m.attr("disabled",!1)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;p={hasTitle:!1,hasBody:!1,hasTarget:!1,hasCategory:!1,hasExcerpt:!1,checkNums:0},$("textarea[data-editor]").each(function(){var a=$(this),b=a.data("editor")||"html",c=a.data("editorsize")||"medium",d="small"==c?250:"medium"==c?400:"large"==c?600:800,e={position:"absolute",width:a.width(),height:d,"class":a.attr("class")},f=$("<div/>",e);f.insertBefore(a),a.css("display","none");var g=ace.edit(f[0]);g.getSession().setValue(a.val()),g.setTheme("ace/theme/merbivore"),g.getSession().setMode("ace/mode/"+b),g.getSession().setUseWrapMode(!0),g.getSession().setWrapLimitRange(80,80),g.renderer.setPrintMarginColumn(80),g.setOption("enableEmmet",!0),g.getSession().on("change",function(){a.val(g.getSession().getValue())}),g.on("change",function(){"post_form_body"==a.attr("id")&&(p.hasBody=""!=g.getSession().getValue()),"post_form_excerpt"==a.attr("id")&&(p.hasExcerpt=""!=g.getSession().getValue()),k()})}),q=$("#addTagBtn"),r=$("#tagsContainer"),s=r.children().length,q.on("click",function(b){return b.preventDefault(),r.append(a(s++)),!1}),$("body").on("click",".removeTagBtn",function(a){a.preventDefault();var b=$("#"+$(this).data("target"))||null;b&&b.remove()}),t=$("form[name='post_form']"),y=$("#post_form_targets").find("input[type='checkbox']"),z=$("#post_form_category"),l=$("#post_form_save"),m=$("#post_form_save_publish"),l.attr("disabled",!0),m.attr("disabled",!0),n=$("#dropzone-img-bandeau"),o=$("#dropzone-img-squarre "),u=$("#dropzone-img-fb"),n.zpbUploadImage({url:'{{ path("zpb_admin_posts_img_upload") }}',errorMessage:b,loadDone:c,loadFail:d}),o.zpbUploadImage({url:'{{ path("zpb_admin_posts_img_upload") }}',errorMessage:e,loadDone:f,loadFail:g}),u.zpbUploadImage({url:'{{ path("zpb_admin_posts_img_upload") }}',errorMessage:h,loadDone:i,loadFail:j}),v=n.data("zpbUploadImage"),w=o.data("zpbUploadImage"),x=u.data("zpbUploadImage"),$("#post_form_title").on("change",function(){p.hasTitle=$(this).val().length>0,k()}),y.on("change",function(a){a.preventDefault(),$(this).is(":checked")?(p.hasTarget=!0,p.checkNums++):(p.checkNums--,p.checkNums<0&&(p.checkNums=0),0==p.checkNums&&(p.hasTarget=!1)),k()}),z.on("change",function(){var a=$(this).find("option:selected");p.hasCategory=""!=a.val(),k()})});